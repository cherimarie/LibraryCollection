<h1>Genres</h1>
<% if current_user && (current_user.has_role? :admin) %>
  <%= link_to "New Genre", new_genre_path, class: "btn right" %>
<% end %>

<table class="index">
  <thead>
    <tr>
      <th>Genre Name</th>
      <th>Number of Books</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @genres.each do |g| %>
    <tr>
      <td> <%= link_to g.name, genre_path(g.id) %></td>
      <td><%= g.books.count %></td>      
      <% if current_user && (current_user.has_role? :admin) %>
        <td>
          <%= link_to "Edit", edit_genre_path(g) %>
          <%= link_to "Delete", genre_path(g), method: :delete, data: {confirm: "Are you sure you want to delete this genre?"} %>
        </td>
      <% end %>
    </tr>
    <% end %>
  </tbody>
</table>